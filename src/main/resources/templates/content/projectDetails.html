<div th:fragment="content">

    <!-- ì™¼ìª½: í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´ -->
    <div class="w-1/2">
        <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ“ í”„ë¡œì íŠ¸ ì •ë³´</h2>
        <div class="bg-white p-6 rounded-lg shadow space-y-4">
            <div><strong>í”„ë¡œì íŠ¸ ì´ë¦„:</strong> <span th:text="${project.projectName}"></span></div>
            <div><strong>ìƒíƒœ:</strong> <span th:text="${project.projectStatus}"></span></div>
            <div><strong>ìƒì„±ì¼:</strong> <span th:text="${#temporals.format(project.createdAt, 'yyyy-MM-dd')}"></span></div>
        </div>
    </div>

    <!-- ì˜¤ë¥¸ìª½: íƒœê·¸ ë° ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬ -->
    <div class="w-1/2 space-y-8">

        <div class="flex space-x-2 mb-4">
            <button onclick="toggleSection('tagSection')" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded">íƒœê·¸ ê´€ë¦¬</button>
            <button onclick="toggleSection('milestoneSection')" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded">ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬</button>
        </div>

        <!-- íƒœê·¸ ê´€ë¦¬ -->
        <div id="tagSection" class="hidden bg-white p-6 rounded-lg shadow space-y-4">
            <!-- (ë„¤ê°€ ì˜¬ë ¤ì¤€ íƒœê·¸ ê´€ë¦¬ ì½”ë“œ) -->
        </div>

        <!-- ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬ -->
        <div id="milestoneSection" class="hidden bg-white p-6 rounded-lg shadow space-y-4">
            <!-- (ë„¤ê°€ ì˜¬ë ¤ì¤€ ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬ ì½”ë“œ) -->
        </div>

        <!-- íƒœê·¸ ê´€ë¦¬ -->
        <div class="bg-white p-6 rounded-lg shadow space-y-4">
            <h2 class="text-xl font-bold text-gray-800 mb-2">ğŸ·ï¸ íƒœê·¸ ê´€ë¦¬</h2>

            <!-- íƒœê·¸ ë“±ë¡ (ë‚´ë¶€) -->
            <form th:action="@{/tags/{projectId}(projectId=${project.projectId})}" method="post" class="flex gap-2 mb-4">
                <input type="text" name="tagName" placeholder="ìƒˆ íƒœê·¸ ì…ë ¥" required
                       class="flex-1 border rounded p-2 focus:outline-none focus:ring focus:border-blue-300" />
                <button type="submit" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded">ë“±ë¡</button>
            </form>

            <!-- íƒœê·¸ ë¦¬ìŠ¤íŠ¸ -->
            <div class="space-y-2">
                <th:block th:if="${tagList != null and !#lists.isEmpty(tagList)}">
                    <th:block th:each="tag : ${tagList}">
                        <div class="flex items-center justify-between p-2 bg-gray-100 rounded">
                            <span th:text="${tag.tagName}">íƒœê·¸ëª…</span>
                        </div>
                    </th:block>
                </th:block>
                <th:block th:if="${tagList == null or #lists.isEmpty(tagList)}">
                    <p class="text-gray-400 text-sm">ë“±ë¡ëœ íƒœê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                </th:block>
            </div>
        </div>

        <!-- ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬ -->
        <div class="bg-white p-6 rounded-lg shadow space-y-4">
            <h2 class="text-xl font-bold text-gray-800 mb-2">ğŸ—“ï¸ ë§ˆì¼ìŠ¤í†¤ ê´€ë¦¬</h2>

            <!-- ìƒˆ ë§ˆì¼ìŠ¤í†¤ ë“±ë¡ ë²„íŠ¼ -->
            <div class="flex justify-end mb-4">
                <a th:href="@{/milestones/{projectId}(projectId=${project.projectId})}"
                   class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded">ìƒˆ ë§ˆì¼ìŠ¤í†¤ ë“±ë¡</a>
            </div>

            <!-- ë§ˆì¼ìŠ¤í†¤ ë¦¬ìŠ¤íŠ¸ -->
            <div class="space-y-2">
                <th:block th:if="${milestoneList != null and !#lists.isEmpty(milestoneList)}">
                    <th:block th:each="milestone : ${milestoneList}">
                        <div class="flex items-center justify-between p-2 bg-gray-100 rounded">
                            <span th:text="${milestone.milestoneName}">ë§ˆì¼ìŠ¤í†¤ëª…</span>
                            <span class="text-xs text-gray-500" th:text="${#temporals.format(milestone.startDate, 'yyyy-MM-dd')} + ' ~ ' + ${#temporals.format(milestone.endDate, 'yyyy-MM-dd')}">
                                2025-05-01 ~ 2025-06-01
                            </span>
                        </div>
                    </th:block>
                </th:block>
                <th:block th:if="${milestoneList == null or #lists.isEmpty(milestoneList)}">
                    <p class="text-gray-400 text-sm">ë“±ë¡ëœ ë§ˆì¼ìŠ¤í†¤ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </th:block>
            </div>
        </div>
    </div>

</div>

<script>
    function toggleSection(sectionId) {
        const tagSection = document.getElementById('tagSection');
        const milestoneSection = document.getElementById('milestoneSection');

        if (sectionId === 'tagSection') {
            tagSection.classList.toggle('hidden');
            milestoneSection.classList.add('hidden');
        } else if (sectionId === 'milestoneSection') {
            milestoneSection.classList.toggle('hidden');
            tagSection.classList.add('hidden');
        }
    }
</script>